# 支付小程序

## 新特性

1. 快捷支付
> 优惠信息主要分为两类
>
>   手动选择：是否是充值支付，是否使用红包
>
>   自动选择的优惠：动态股东折扣，满减消费券
>
> 如果手动选择的部分，在不选择也一样，则在输入金额后直接发起支付，这对于新用户很友好

2. 快捷充值
> 用户充值时不用再多跳转一页，无需更多等待，对开发来说维护也更方便

3. 快速获取手机号
> 用户在输入完支付金额后，如果该用户没有绑定手机号，则通过小程序接口来请求获取手机号授权

4. 自定义支付完成页
> 得益于使用原生支付的便利，在用户支付完成后，可跳转到自定义的支付页

5. 基于Taro开发
> one code, run everywhere
>
> Taro是一个开放式跨端跨框架解决方案，编译后的代码可运行在包括H5/微信/支付宝/百度/字节跳动/QQ小程序/RN（Android, IOS）的平台上

6. 虚拟键盘(beta)
> 由于ios系统的限制，在较高的支付宝版本中，小程序无法主动通过添加**focus**属性来调起键盘,因为密码组件实现的限制，在这些版本中，ios会有无法输入密码的情况。

> 虚拟键盘则不会受到平台或是系统的限制，他的本质上还是元素，因为添加了动画、按钮和点击事件，这让虚拟键盘的表现和系统键盘一致，因为可以自定义，也能展现更好的ui

## 升级指南

从 v3.x 升级的同学，首先需要安装 v3.3 的 CLI 工具：

> npm i -g @tarojs/cli

然后进入项目，删除 node_modules、yarn.lock、package-lock.json。

最后把
`package.json` 文件中 taro 相关依赖的版本修改为`>3.3.0`，再重新安装依赖。至此升级结束。

## 微信和支付宝在小程序平台上的差异
> 微信和支付宝，虽然他们都有着自己的小程序，但是，从小程序的历史来看，还是微信的小程序要更悠久，你可以在支付宝开发流程中发现很多相似的地方

* 扫码流程
* 登录
* 调起键盘的方式(1.focus属性，2.虚拟键盘)
* 获取手机号
* 调起支付的方式

通过props来进行显示的控制
只暴露一个接口 change(e)   e.type=[1,2,3,4,5,6,7,8,9,0,del,done]

## wxparse
解析html为小程序

## painter.js
绘图
